{"version":3,"file":"fittxt.m.js","sources":["../src/index.js"],"sourcesContent":["// https://codeburst.io/throttling-and-debouncing-in-javascript-b01cad5c8edf\nconst throttle = (func, limit) => {\n  let inThrottle\n  return function () {\n    const args = arguments\n    const context = this\n    if (!inThrottle) {\n      func.apply(context, args)\n      inThrottle = true\n      setTimeout(() => (inThrottle = false), limit)\n    }\n  }\n}\n\nconst raf = window.requestAnimationFrame || ((cb) => setTimeout(cb, 0))\n\nfunction fittxt (\n  elems,\n  {\n    factor = 8,\n    min = Number.NEGATIVE_INFINITY,\n    max = Number.POSITIVE_INFINITY,\n    throttleTime = 200\n  } = {}\n) {\n  if (!Array.isArray(elems)) {\n    elems = [elems]\n  }\n\n  elems = elems.map(\n    elem => (typeof elem === 'string' ? document.querySelector(elem) : elem)\n  )\n\n  function resize (elem, factor) {\n    const width = elem.clientWidth\n    raf(() => {\n      elem.style.fontSize = Math.max(Math.min(width / factor, parseFloat(max)), parseFloat(min))\n    })\n  }\n\n  elems.forEach(elem => {\n    const wrapper = throttle(() => resize(elem, factor), throttleTime)\n    window.addEventListener('resize', wrapper)\n    window.addEventListener('orientationchange', wrapper)\n    resize(elem, factor)\n  })\n}\n\nexport default fittxt\n"],"names":["const","throttle","func","limit","let","inThrottle","apply","this","arguments","setTimeout","raf","window","requestAnimationFrame","cb","elems","ref","Number","NEGATIVE_INFINITY","POSITIVE_INFINITY","resize","elem","factor","width","clientWidth","style","fontSize","Math","max","min","parseFloat","Array","isArray","map","document","querySelector","forEach","wrapper","throttleTime","addEventListener"],"mappings":"AACAA,IAAMC,WAAYC,EAAMC,GACtBC,IAAIC,EACJ,OAAO,WAGAA,IACHH,EAAKI,MAFSC,KADHC,WAIXH,GAAa,EACbI,6BAAkBJ,GAAa,GAAQF,MAKvCO,EAAMC,OAAOC,gCAA2BC,UAAOJ,WAAWI,EAAI,mBAEpE,SACEC,EACAC,oDACW,8BACHC,OAAOC,8CACPD,OAAOE,wCAYf,SAASC,EAAQC,EAAMC,GACrBrB,IAAMsB,EAAQF,EAAKG,YACnBb,aACEU,EAAKI,MAAMC,SAAWC,KAAKC,IAAID,KAAKE,IAAIN,EAAQD,EAAQQ,WAAWF,IAAOE,WAAWD,qBAdxE,KAGZE,MAAMC,QAAQjB,KACjBA,GAASA,KAGXA,EAAQA,EAAMkB,aACZZ,SAAyB,iBAATA,EAAoBa,SAASC,cAAcd,GAAQA,KAU/De,iBAAQf,GACZpB,IAAMoC,EAAUnC,oBAAekB,EAAOC,EAAMC,IAASgB,GACrD1B,OAAO2B,iBAAiB,SAAUF,GAClCzB,OAAO2B,iBAAiB,oBAAqBF,GAC7CjB,EAAOC,EAAMC"}