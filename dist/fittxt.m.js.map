{"version":3,"file":"fittxt.m.js","sources":["../src/index.js"],"sourcesContent":["// https://codeburst.io/throttling-and-debouncing-in-javascript-b01cad5c8edf\nconst throttle = (func, limit) => {\n  let lastFunc\n  let lastRan\n  return function () {\n    const context = this\n    const args = arguments\n    if (!lastRan) {\n      func.apply(context, args)\n      lastRan = Date.now()\n    } else {\n      clearTimeout(lastFunc)\n      lastFunc = setTimeout(function () {\n        if ((Date.now() - lastRan) >= limit) {\n          func.apply(context, args)\n          lastRan = Date.now()\n        }\n      }, limit - (Date.now() - lastRan))\n    }\n  }\n}\n\nconst raf = window.requestAnimationFrame || ((cb) => setTimeout(cb, 0))\n\nfunction fittxt (\n  elems,\n  {\n    factor = 8,\n    min = Number.NEGATIVE_INFINITY,\n    max = Number.POSITIVE_INFINITY,\n    throttleTime = 200\n  } = {}\n) {\n  if (!Array.isArray(elems)) {\n    elems = [elems]\n  }\n\n  elems = elems.map(\n    elem => (typeof elem === 'string' ? document.querySelector(elem) : elem)\n  )\n\n  function resize (elem, factor) {\n    const width = elem.clientWidth\n    raf(() => {\n      elem.style.fontSize = Math.max(Math.min(width / factor, parseFloat(max)), parseFloat(min))\n    })\n  }\n\n  elems.forEach(elem => {\n    const wrapper = throttle(() => resize(elem, factor), throttleTime)\n    window.addEventListener('resize', wrapper)\n    window.addEventListener('orientationchange', wrapper)\n    resize(elem, factor)\n  })\n}\n\nexport default fittxt\n"],"names":["const","throttle","func","limit","let","lastFunc","lastRan","context","this","args","arguments","clearTimeout","setTimeout","Date","now","apply","raf","window","requestAnimationFrame","cb","elems","ref","Number","NEGATIVE_INFINITY","POSITIVE_INFINITY","resize","elem","factor","width","clientWidth","style","fontSize","Math","max","min","parseFloat","Array","isArray","map","document","querySelector","forEach","wrapper","throttleTime","addEventListener"],"mappings":"AACAA,IAAMC,WAAYC,EAAMC,GACtBC,IAAIC,EACAC,EACJ,OAAO,WACLN,IAAMO,EAAUC,KACVC,EAAOC,UACRJ,GAIHK,aAAaN,GACbA,EAAWO,WAAW,WACfC,KAAKC,MAAQR,GAAYH,IAC5BD,EAAKa,MAAMR,EAASE,GACpBH,EAAUO,KAAKC,QAEhBX,GAASU,KAAKC,MAAQR,MATzBJ,EAAKa,MAAMR,EAASE,GACpBH,EAAUO,KAAKC,SAafE,EAAMC,OAAOC,gCAA2BC,UAAOP,WAAWO,EAAI,mBAEpE,SACEC,EACAC,oDACW,8BACHC,OAAOC,8CACPD,OAAOE,wCAYf,SAASC,EAAQC,EAAMC,GACrB3B,IAAM4B,EAAQF,EAAKG,YACnBb,aACEU,EAAKI,MAAMC,SAAWC,KAAKC,IAAID,KAAKE,IAAIN,EAAQD,EAAQQ,WAAWF,IAAOE,WAAWD,qBAdxE,KAGZE,MAAMC,QAAQjB,KACjBA,GAASA,KAGXA,EAAQA,EAAMkB,aACZZ,SAAyB,iBAATA,EAAoBa,SAASC,cAAcd,GAAQA,KAU/De,iBAAQf,GACZ1B,IAAM0C,EAAUzC,oBAAewB,EAAOC,EAAMC,IAASgB,GACrD1B,OAAO2B,iBAAiB,SAAUF,GAClCzB,OAAO2B,iBAAiB,oBAAqBF,GAC7CjB,EAAOC,EAAMC"}